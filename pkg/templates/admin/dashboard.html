{% extends 'admin/layout.html' %}

    {% block cards %}
        <!-- right hand side div -->
        <div class="col-md-10 col2 rounded">
            <!-- first row for the right hand side -->
            <div class="parentDiv1 rounded d-lg-flex mt-2 justify-content-between ">
                <div class="childDiv1 rounded shadow">
                    <p><i class="fas fa-shopping-bag ms-2"></i> TODAY'S SALES </p>
                    {% set total_sales = sales | sum(attribute='pay_amount') %}

                    <h2 class="heading1 ms-2">&#8358; {{total_sales}}</h2>
                </div>
                <div class="childDiv1 rounded shadow">
                    <p><i class="fas fa-dolly ms-2"></i>TODAY'S ORDERS</p>
                    <h2 class="heading1 ms-2">{{ todays_order|length }}</h2>
                </div>
                <div class="childDiv1 rounded shadow">
                    <p><i class="fas fa-users ms-2"></i> ACTIVE USERS</p>
                    <h2 class="heading1 ms-2">{{ users|length }}</h2>
                </div>
                <div class="childDiv1 rounded shadow">
                    <p><i class="fas fa-clock ms-2"></i>  AVAILABLE BOXES</p>

                    <h2 class="heading1 ms-2">{{ enabled_boxes|length }}</h2>
                </div>
        </div>
    {% endblock %}

    {% block table1 %}
        <!-- second row for the right hand side -->
        <div class="row rowCol rounded mt-4">
            <div class="col-12 nestedCol me-md-3 rounded table-responsive shadow">
                <table class="w-100">

                    <thead>
                        <tr>
                            <th colspan="3">Recent Users</th>
                            <th colspan="2"><a class="btn btn-sm btn-primary" href="{{url_for('view_users')}}">View All</a></th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>User Firstname</td>
                            <td>User lastname</td>
                            <td>User email</td>
                            <td>User Address</td>
                            <td>User Status</td>
                        </tr>
                        {% if user %}
                            {% for user in user %}
                                <tr>
                                    <td>{{user.user_fname}}</td>
                                    <td>{{user.user_lname}}</td>
                                    <td>{{user.user_email}}</td>
                                    <td>{{user.user_address}}</td>
                                    <td><p class="badge bg-success rounded-1">{{user.user_status}}</p></td>
                                </tr>
                            {% endfor %}
                        {% endif %}
                    </tbody>

                </table>
            </div>
            
        </div>
    {% endblock %}

    {% block table2 %}
        <!-- third row for the right hand side -->
        <div class="row rowCol2 mt-4 rounded shadow">
            <div class="col transformDiv table-responsive ">

                <table cellspacing="0" cellpadding="20" width="100%">
                    <thead>
                        <tr>
                            <th>S/N</th>
                            <th>Box Name</th>
                            <th>Box size</th>
                            <th>Action</th>
                            <th>Box price</th>
                                                       
                        </tr>
                    </thead>
                    <tbody>
                        {% if box %}
                            {% for box in box %}
                                <tr>
                                    <td>{{loop.index}}</td>
                                    <td>{{box.box_name}}</td>
                                    <td><a href="{{url_for('update_box', id = box.box_id)}}" class="btn btn-sm btn-outline-warning">Update This box</a></td>
                                    {% if box.box_size == 'Small' %}
                                        <td><p class="badge bg-primary">{{box.box_size}}</p></td>
                                    {% elif box.box_size == 'Medium' %}
                                        <td><p class="badge bg-success">{{box.box_size}}</p></td>
                                    {% else %}
                                        <td><p class="badge bg-dark">{{box.box_size}}</p></td>
                                    {% endif %}
                                    <td>{{box.box_price}}</td>

                                </tr>
                            {% endfor %}
                        {% endif %}
                    </tbody>
                </table>

            </div>
        </div>
    {% endblock %}